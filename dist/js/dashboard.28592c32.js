"use strict";(self["webpackChunkvue_admin_template"]=self["webpackChunkvue_admin_template"]||[]).push([[945],{5289:function(e,l,t){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e,l){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,l||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}function i(e){var l=n(e,"string");return"symbol"==a(l)?l:l+""}function o(e,l,t){return(l=i(l))in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}t.d(l,{AP:function(){return k},C1:function(){return f},zm:function(){return _},du:function(){return m},bB:function(){return v},T2:function(){return h},Zc:function(){return y},GP:function(){return g},fc:function(){return p}});t(9479);var d=t(953),u=t(7682);let s={};class r{constructor(e={}){e=Object.assign({method:"GET",path:"",error:{message(){return"Ошибка запроса: "+this.path},handler:void 0}},e),this.method=e.method.toUpperCase(),this.type=e.type.toLowerCase();const l=/(:[^/]+)/.exec(e.path);this.path=e.path,null!=l&&(this.id=l[0].replace(":","")),this.errorMessage=e.error.message,this.permissionKeyFallback=e.permissionKeyFallback,e.error.handler&&(this.errorHandler=e.errorHandler)}errorHandler(e){"list"!=this.type||404!=e?.response?.status?e?.response?.data&&console.log(e):console.error(e)}async send(e){if(void 0!==this.id){if(e instanceof FormData)var l=e.get(this.id);else l=e[this.id];"GET"!=this.method&&"POST"!=this.method||delete e[this.id]}try{var t=this.method.toLowerCase(),a=await u.A[t](this.path.replace(":"+this.id,l),"get"==t?{params:e}:e);return a}catch(n){throw this.errorHandler(n),n}}}class c{constructor(e,l={},t=[]){o(this,"data",(0,d.Kh)({dict:{},items:[],meta:{},pagination:{from:0,to:0,of:0,per:0}})),o(this,"permissions",{list:()=>b(this?._list),get:()=>b(this?._get),create:()=>b(this?._create),patch:()=>b(this?._patch),replace:()=>b(this?._replace),toggle:()=>b(this?._toggle),change:()=>b(this?._change),reset:()=>b(this?._reset),delete:()=>b(this?._delete)}),this.flags=Object.assign({paginated:!1,listable:!1,editable:!1,deletable:!1,addable:!1,toggleable:!1},l),t.forEach((e=>{"option"==e.filter&&(e.idField=e.idField||"id",e.valueField=e.valueField||"title")})),this.fields=t,e.forEach((e=>{this["_"+e.type]=e,e.id&&(this.idKey=e.id)})),this._list&&void 0===l.listable&&(this.flags.listable=!0),this._delete&&void 0===l.deletable&&(this.flags.deletable=!0),this._patch&&void 0===l.editable&&(this.flags.editable=!0),this._create&&void 0===l.addable&&(this.flags.addable=!0),this._toggle&&void 0===l.toggleable&&(this.flags.toggleable=!0)}async list(e){try{var l=await this._list.send(e)}catch(t){if(404!=t?.request?.status)throw t;this.data.items=[],this.flags.paginated&&(this.data.pagination.from=0,this.data.pagination.to=0,this.data.pagination.per=0,this.data.pagination.of=0)}if(l)return this.flags.paginated?void 0!==l.data.count?(this.data.items=l.data.results,this.data.pagination.from=l.data.count?l.data.page_size*(l.data.page_number-1)+1:0,this.data.pagination.to=Math.min(l.data.page_size*l.data.page_number,l.data.results.length),this.data.pagination.of=l.data.count,this.data.pagination.per=l.data.page_size):(this.data.items=l.data.items,this.data.pagination.from=l.data.size*(l.data.page-1)+1,this.data.pagination.to=Math.min(l.data.size*l.data.page,l.data.items?.length),this.data.pagination.of=l.data.total,this.data.pagination.per=l.data.size):this.flags.key?(this.data.meta=l.data,this.data.items=this.data.meta[this.flags.key]):this.data.items=l.data,l}async get(e){const l=e[this._get.id];let t=await this._get.send(e);if(t)return this.data.dict[l]=t.data,t}create(e){return this._create?.send(e)}patch(e){return this._patch.send(e)}replace(e){return this._replace.send(e)}toggle(e){return this._toggle.send(e)}change(e){return this._change.send(e)}reset(e){return this._reset.send(e)}delete(e){const l={};return l[this._delete.id]=e,this._delete.send(l)}getResourceURL(e){if(null!=e)return this._patch.path.replace(":"+this._patch.id,e);throw"ID not provided"}}function b(e){if(!e)return!1;let l=e.path;return s[l]?.[e.method]||!1}const k=new c([new r({type:"list",method:"GET",path:"admin/contract/list/"})],{paginated:!0},[{visible:!0,key:"id",label:"ID"},{visible:!0,key:"title",label:"Nomi"},{visible:!0,key:"investor",label:"Investor"},{visible:!0,key:"fond",label:"Fond"},{visible:!1,key:"condition",label:"Holati"},{visible:!0,key:"balance",label:"Balans"},{visible:!0,key:"payment_currency",label:"Valyuta"},{visible:!0,key:"description",label:"Ma'lumot"},{visible:!0,key:"status",label:"Status"},{visible:!0,key:"contract_type",label:"Shartnoma turi",sortable:!0},{visible:!0,key:"percentage",label:"Foiz"},{visible:!0,key:"profit",label:"Foyda"}]),f=new c([new r({type:"list",method:"GET",path:"admin/account/list/"})],{paginated:!0},[{visible:!0,key:"id",label:"ID"},{visible:!0,key:"investor",label:"Investor"},{visible:!0,key:"address",label:"Manzili"},{visible:!1,key:"inn",label:"INN"}]),v=new c([new r({type:"list",method:"GET",path:"admin/contract/org-contract/list/"}),new r({type:"create",method:"POST",path:"admin/contract/org-contract/create/"})],{paginated:!0},[{visible:!0,isAddable:!1,key:"id",label:"ID"},{visible:!0,isAddable:!0,key:"organization",label:"Korxona"},{visible:!0,isAddable:!0,key:"contract_date",label:"Sanasi"},{visible:!0,isAddable:!0,key:"balance",label:"Balansi"},{visible:!0,isAddable:!1,key:"status",label:"Status"},{visible:!0,isAddable:!0,key:"type",label:"Type"},{visible:!0,isAddable:!1,key:"subdistribution",label:"Taqsimot",sortable:!0}]),m=new c([new r({type:"list",method:"GET",path:"admin/contract/fond/list/"})],{paginated:!0},[{visible:!0,key:"id",label:"ID"},{visible:!0,key:"title",label:"Nomi"},{visible:!0,key:"description",label:"Tarif"},{visible:!1,key:"old_balance",label:"Eski balans"},{visible:!0,key:"fond_balance",label:"Fondning balansi"},{visible:!0,key:"status",label:"Status"},{visible:!0,key:"created",label:"Yaratilgan"},{visible:!0,key:"start_date",label:"Boshlash sanasi"},{visible:!0,key:"end_date",label:"Tugatish sanasi",sortable:!0}]),_=new c([new r({type:"list",method:"GET",path:"admin/contract/distribution/list/"}),new r({type:"create",method:"POST",path:"admin/contract/distribution/create/"})]),p=new c([new r({type:"list",method:"GET",path:"admin/contract/sub-distribution/list/"})]),y=new c([new r({type:"list",method:"GET",path:"admin/contract/protocol/detail/:id"})],{paginated:!0},[{visible:!0,key:"id",label:"ID"},{visible:!0,key:"inn",label:"Mijoz INN"},{visible:!0,key:"contract_total_balance",label:"Summa"},{visible:!0,key:"balance",label:"Balans"},{visible:!0,key:"percentage",label:"Ulush"},{visible:!0,key:"initial_balance",label:"Dastlabki sarmoya"},{visible:!0,key:"withdraw",label:"Yechib olish"},{visible:!0,key:"client_balance",label:"Dvidend olish huquqi"},{visible:!0,key:"old_percentage",label:"Ulush"},{visible:!0,key:"dividend",label:"Dvidend"},{visible:!0,key:"investment",label:"Sarmoya kiritish(oldingi oy)"}]),g=new c([new r({type:"list",method:"GET",path:"admin/contract/protocol/list/"}),new r({type:"create",method:"POST",path:"admin/contract/protocol/create/"})],{paginated:!0},[{visible:!0,key:"id",label:"ID"},{visible:!0,key:"user",label:"Foydalanuvchi"},{visible:!0,key:"fond",label:"Fond"},{visible:!1,key:"contract",label:"Shartnoma"},{visible:!1,key:"status",label:"Status"},{visible:!0,key:"balance",label:"Balans"},{visible:!0,key:"status",label:"Status"},{visible:!0,key:"profit",label:"Foyda"},{visible:!0,key:"percentage",label:"Foiz"},{visible:!0,key:"description",label:"Ma'lumot"},{visible:!0,key:"more",label:"Harakat"}]),h=new c([new r({type:"list",method:"GET",path:"admin/contract/organization/list/"})])},9018:function(e,l,t){t.r(l),t.d(l,{default:function(){return p}});var a=t(641),n=t(33);const i={class:"d-flex"},o={class:"p-3"},d=["value"],u=["value"],s=["value"];function r(e,l,t,r,c,b){const k=(0,a.g2)("CButton"),f=(0,a.g2)("CTableHeaderCell"),v=(0,a.g2)("CTableRow"),m=(0,a.g2)("CTableHead"),_=(0,a.g2)("CTableDataCell"),p=(0,a.g2)("CIcon"),y=(0,a.g2)("CTableBody"),g=(0,a.g2)("CTable"),h=(0,a.g2)("CCardBody"),C=(0,a.g2)("CCard"),F=(0,a.g2)("CCol"),L=(0,a.g2)("CRow"),w=(0,a.g2)("CModalTitle"),D=(0,a.g2)("CModalHeader"),S=(0,a.g2)("CFormLabel"),T=(0,a.g2)("CFormInput"),V=(0,a.g2)("CFormSelect"),K=(0,a.g2)("CFormTextarea"),W=(0,a.g2)("CModalFooter"),X=(0,a.g2)("CModal"),E=(0,a.gN)("c-tooltip");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(C,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{component:"button",type:"button",color:"info",class:"mb-2 align-self-end text-white",onClick:l[0]||(l[0]=e=>r.isVisibleSidebar=!0)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("shartnoma qo'shish")]))),_:1}),(0,a.bF)(g,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.fields,(e=>((0,a.uX)(),(0,a.Wv)(f,{key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)))),128)),(0,a.bF)(f,null,{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Harakat")]))),_:1})])),_:1})])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.listData,(e=>((0,a.uX)(),(0,a.Wv)(v,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.title),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.investor?.get_full_name),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.fond?.uz),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.condition),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.balance),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.payment_currency),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.description.uz),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.status),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.contract_type),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.percentage),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.profit),1)])),_:2},1024),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{disabled:"Completed"==e.status,size:"sm",class:"btn btn-success text-white",onClick:l=>r.verifyStatus(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(p,{icon:"cil-check",height:"18",alt:"true",style:{"margin-right":"5px"}})])),_:2},1032,["disabled","onClick"])),[[E,{content:"Tasdiqlash",placement:"top"}]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{size:"sm",class:"btn btn-danger ms-1 text-white",onClick:l=>r.deleteItem(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(p,{icon:"cil-x-circle",height:"18"})])),_:2},1032,["onClick"])),[[E,{content:"O'chirish",placement:"top"}]])])])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(v)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(X,{onClose:l[8]||(l[8]=()=>{r.isVisibleSidebar=!1}),keyboard:!1,visible:r.isVisibleSidebar,class:"p-3"},{default:(0,a.k6)((()=>[(0,a.bF)(D,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,null,{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("Shartnoma yaratish")]))),_:1})])),_:1}),(0,a.Lk)("div",o,[(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("Contract number")]))),_:1}),(0,a.bF)(T,{type:"text",modelValue:r.formData.title,"onUpdate:modelValue":l[1]||(l[1]=e=>r.formData.title=e)},null,8,["modelValue"]),l[19]||(l[19]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[13]||(l[13]=[(0,a.eW)("Contract type")]))),_:1}),(0,a.bF)(V,{modelValue:r.formData.contract_type,"onUpdate:modelValue":l[2]||(l[2]=e=>r.formData.contract_type=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.contract_typeList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.val,key:e.id},(0,n.v_)(e.name),9,d)))),128))])),_:1},8,["modelValue"]),l[20]||(l[20]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("Currency")]))),_:1}),(0,a.bF)(V,{modelValue:r.formData.payment_currency,"onUpdate:modelValue":l[3]||(l[3]=e=>r.formData.payment_currency=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.currencyList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.val,key:e.id},(0,n.v_)(e.name),9,u)))),128))])),_:1},8,["modelValue"]),l[21]||(l[21]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[15]||(l[15]=[(0,a.eW)("Balance")]))),_:1}),(0,a.bF)(T,{type:"number",modelValue:r.formData.balance,"onUpdate:modelValue":l[4]||(l[4]=e=>r.formData.balance=e)},null,8,["modelValue"]),l[22]||(l[22]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[16]||(l[16]=[(0,a.eW)("Fond")]))),_:1}),(0,a.bF)(V,{modelValue:r.formData.fond,"onUpdate:modelValue":l[5]||(l[5]=e=>r.formData.fond=e)},{default:(0,a.k6)((()=>[l[17]||(l[17]=(0,a.Lk)("option",{value:"",selected:"",disabled:""},"Tanlang",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.fondList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.id,key:e.id},(0,n.v_)(e.title?.uz)+" "+(0,n.v_)(e.id),9,s)))),128))])),_:1},8,["modelValue"]),l[23]||(l[23]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(S,null,{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("Description")]))),_:1}),(0,a.bF)(K,{modelValue:r.formData.description,"onUpdate:modelValue":l[6]||(l[6]=e=>r.formData.description=e)},null,8,["modelValue"])]),(0,a.bF)(W,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{color:"secondary",onClick:l[7]||(l[7]=e=>r.isVisibleSidebar=!1)},{default:(0,a.k6)((()=>l[24]||(l[24]=[(0,a.eW)("Yopish")]))),_:1}),(0,a.bF)(k,{color:"primary",onClick:r.submitForm},{default:(0,a.k6)((()=>l[25]||(l[25]=[(0,a.eW)("Saqlash")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible"])])}var c=t(7682),b=t(953),k=t(5289),f=t(2994),v={name:"DashboardPage",components:{CInputGroup:f.BG,CFormInput:f.OG,CFormLabel:f.A6,CFormSelect:f.MT,CFormTextarea:f.Im,CModal:f.zS,CSelect:f.CSelect,CMultiSelect:f.CMultiSelect,CButton:f.Q_,CTableRow:f.YI},setup(){let e=(0,b.KR)([]);const l=(0,b.KR)(!1),t=(0,b.KR)(null),n=(0,b.KR)([]),i=(0,b.Kh)({title:null,contract_type:"INVESTMENT",fond:null,description:"",payment_currency:"",balance:""}),o=(0,b.KR)([{name:"UZS",val:"uzs",id:1},{name:"RUB",val:"rub",id:2},{name:"USD",val:"usd",id:3},{name:"EUR",val:"eur",id:4}]),d=(0,b.KR)([{name:"Investment",val:"Investment"},{name:"Dividend",val:"Dividend"},{name:"Withdraw",val:"Withdraw"}]);async function u(){e.value=await k.AP.list().then((e=>e.data))}(0,a.sV)((()=>{u(),r()}));(0,a.EW)((()=>k.bB?.fields));const s=(0,a.EW)((()=>k.AP?.fields));async function r(e){n.value=await k.du.list().then((e=>e?.data||[]))}async function f(){try{await c.A.post("admin/contract/create/",i),u(),l.value=!1}catch(e){console.log(e.response?.data)}}async function v(e){console.log(e),await c.A.put(`admin/contract/update/${e}/`,{status:"Completed"}),u()}async function m(e){await c.A.delete(`admin/contract/delete/${e}/`),u()}return{listData:e,contract_typeList:d,fields:s,isVisibleSidebar:l,modalProtocol:t,formData:i,currencyList:o,fondList:n,fetchFondList:r,submitForm:f,verifyStatus:v,deleteItem:m}}},m=t(6262);const _=(0,m.A)(v,[["render",r]]);var p=_},8420:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(641),n=t(33);function i(e,l,t,i,o,d){const u=(0,a.g2)("CTableHeaderCell"),s=(0,a.g2)("CTableRow"),r=(0,a.g2)("CTableHead"),c=(0,a.g2)("CTableDataCell"),b=(0,a.g2)("CTableBody"),k=(0,a.g2)("CTable"),f=(0,a.g2)("CCardBody"),v=(0,a.g2)("CCard"),m=(0,a.g2)("CCol"),_=(0,a.g2)("CRow");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.fields,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.listData,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.user?.get_full_name),1)])),_:2},1024),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.address),1)])),_:2},1024),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.inn),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(s)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])}var o=t(953),d=t(5289),u={name:"DashboardPage",components:{},setup(){let e=(0,o.KR)([]);async function l(){e.value=await d.C1.list().then((e=>e.data))}(0,a.sV)((()=>{l()}));const t=(0,a.EW)((()=>d.C1?.fields));return{listData:e,fields:t}}},s=t(6262);const r=(0,s.A)(u,[["render",i]]);var c=r},1087:function(e,l,t){t.r(l),t.d(l,{default:function(){return T}});var a=t(641),n=t(33),i=t(3751);const o={class:"form-group row"},d={class:"col-6"},u=["value"],s={class:"mt-2 bg-white"},r={class:"table table-striped"},c={key:0},b={colspan:"5",class:"py-3 text-muted text-center"},k={key:0,class:"spinner-border text-secondary",role:"status"},f={key:1},v={class:"col-6"},m={key:0,class:"w-100 d-flex flex-row gap-2 justify-content-end"},_={class:"table table-striped"},p=["value"],y=["disabled"];function g(e,l,t,g,h,C){const F=(0,a.g2)("CCardBody"),L=(0,a.g2)("CCard"),w=(0,a.g2)("CButton"),D=(0,a.g2)("CCardHeader"),S=(0,a.g2)("CIcon"),T=(0,a.gN)("c-tooltip");return(0,a.uX)(),(0,a.CE)("div",null,[l[16]||(l[16]=(0,a.Lk)("h3",{class:"w-100 mb-2"},"Taqsimot",-1)),(0,a.Lk)("div",o,[(0,a.Lk)("div",d,[(0,a.Lk)("div",null,[(0,a.bo)((0,a.Lk)("select",{class:"form-select",id:"fond-list1","onUpdate:modelValue":l[0]||(l[0]=e=>g.selectedProtocol=e)},[l[6]||(l[6]=(0,a.Lk)("option",{value:null,selected:"",disabled:""},"Protokol tanlang",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.protocolList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e,key:e.id},"protocol: "+(0,n.v_)(e.id),9,u)))),128))],512),[[i.u1,g.selectedProtocol]])]),(0,a.Lk)("div",s,[(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.Lk)("table",r,[l[8]||(l[8]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Korxona"),(0,a.Lk)("th",null,"Taqsimot"),(0,a.Lk)("th",null,"Balansi")])],-1)),(0,a.Lk)("tbody",null,[g.subDistList?.length<1?((0,a.uX)(),(0,a.CE)("tr",c,[(0,a.Lk)("td",b,[g.subDistLoading?((0,a.uX)(),(0,a.CE)("div",k,l[7]||(l[7]=[(0,a.Lk)("span",{class:"sr-only"},null,-1)]))):((0,a.uX)(),(0,a.CE)("span",f," Ma'lumot yo'q"))])])):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(g.subDistList,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,n.v_)(e.id),1),(0,a.Lk)("td",null,(0,n.v_)(e.organization?.uz),1),(0,a.Lk)("td",null,(0,n.v_)(e.distribution),1),(0,a.Lk)("td",null,(0,n.v_)(e.balance),1)])))),128))])])])),_:1})])),_:1})])]),(0,a.Lk)("div",v,[g.selectedProtocol?((0,a.uX)(),(0,a.Wv)(L,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(D,null,{default:(0,a.k6)((()=>[(Object.keys(g.selectedProtocol||{}).length,(0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(w,{class:"text-white",size:"sm",color:"info",style:{width:"130px"},onClick:l[1]||(l[1]=e=>g.isVisibleTable=!0)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)(" Shakllantirish ")]))),_:1}),(0,a.bF)(w,{class:"text-white",size:"sm",color:"success",onClick:g.distributeProfit},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Foydani taqsimlash")]))),_:1},8,["onClick"]),(0,a.bF)(w,{type:"button",size:"sm",color:"primary",id:"button-addon2",onClick:l[2]||(l[2]=e=>g.addNewRow())},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)(" Qo'shish ")]))),_:1})]))])),_:1}),(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.Lk)("table",_,[l[15]||(l[15]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Korxona"),(0,a.Lk)("th",null,"Fond"),(0,a.Lk)("th",null,"Summa"),(0,a.Lk)("th",null,"%"),(0,a.Lk)("th",null,"Harakat")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,n.v_)(g.fondData?g.fondData.title?.uz:""),1),(0,a.Lk)("td",null,(0,n.v_)(g.fondData?g.fondData.title?.uz:""),1),(0,a.Lk)("td",{style:(0,n.Tr)({color:(g.fondData?g.fondData.fond_balance-g.distrAmount:0)<=0?"red":""})},[(0,a.eW)((0,n.v_)(g.fondData?g.fondData.fond_balance-g.distrAmount:"")+" ",1),(0,a.bo)((0,a.Lk)("span",null,"Balans yetmaydi",512),[[i.aG,(g.fondData?g.fondData.fond_balance-g.distrAmount:0)<0]])],4),(0,a.Lk)("td",null,(0,n.v_)(g.fondPercent),1),l[12]||(l[12]=(0,a.Lk)("td",null,null,-1))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.tableData,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e},[(0,a.Lk)("td",null,(0,n.v_)(e.factory),1),(0,a.Lk)("td",null,(0,n.v_)(e.fond),1),(0,a.Lk)("td",null,(0,n.v_)(e.sum),1),(0,a.Lk)("td",null,(0,n.v_)(e.percent),1),(0,a.Lk)("td",null,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(w,{size:"sm",class:"btn btn-danger text-white",onClick:l=>g.removeData(e)},{default:(0,a.k6)((()=>[(0,a.bF)(S,{icon:"cil-x-circle",height:"18"})])),_:2},1032,["onClick"])),[[T,{content:"O'chirish",placement:"top"}]])])])))),128)),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("select",{class:"form-select",id:"fond-list","onUpdate:modelValue":l[3]||(l[3]=e=>g.selectedOrganizations=e),onClick:l[4]||(l[4]=(...e)=>g.fetchOrganizationList&&g.fetchOrganizationList(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.subdistriborg,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e,key:e.id},(0,n.v_)(e.title?.uz),9,p)))),128))],512),[[i.u1,g.selectedOrganizations]])]),(0,a.Lk)("td",null,(0,n.v_)(g.fondData?g.fondData.title?.uz:""),1),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("input",{type:"number",disabled:!g.selectedOrganizations?.id,class:"form-control","onUpdate:modelValue":l[5]||(l[5]=e=>g.distrAmount=e),style:(0,n.Tr)({border:"2px solid"+g.fondData?.fond_balance<g.distrAmount?"red":""})},null,12,y),[[i.Jo,g.distrAmount]])]),(0,a.Lk)("td",null,(0,n.v_)(g.organizationPercent?.toFixed(2)),1),l[13]||(l[13]=(0,a.Lk)("td",null,null,-1))])]),(0,a.bF)(w,{color:"info",class:"mt-2 text-white",size:"sm",style:{width:"130px",right:"0"},onClick:(0,i.D$)(g.createDistribution,["prevent"])},{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)(" Submit ")]))),_:1},8,["onClick"])])])),_:1})])),_:1})):(0,a.Q3)("",!0)])])])}t(4114);var h=t(953),C=t(5289),F=t(2994),L=t(5220),w={name:"DashboardPage",components:{CInputGroup:F.BG,CFormInput:F.OG,CFormLabel:F.A6,CFormSelect:F.MT,CFormTextarea:F.Im,CModal:F.zS,CSelect:F.CSelect,CMultiSelect:F.CMultiSelect},onMounted(){},setup(){const e=(0,L.lq)(),l=((0,L.rd)(),(0,h.KR)([])),t=(0,h.KR)([]),n=(0,h.KR)([]),i=(0,h.KR)([]),o=(0,h.KR)([]),d=(0,h.KR)(null),u=(0,h.KR)(!1),s=(0,h.KR)(null),r=(0,h.KR)([]),c=(0,h.KR)(0),b=(0,h.KR)([]),k=(0,h.KR)(null),f=(0,h.KR)(!1),v=(0,h.KR)(!1),m=(0,h.KR)([{name:"withdraw"},{name:"income"},{name:"outgoing"}]),_=(0,h.KR)(null),p=(0,h.Kh)({});let y=(0,h.KR)(0);const g=(0,a.EW)((()=>Object.values(p).reduce(((e,l)=>e+l),0)));(0,a.sV)((()=>{V(),T(),K()}));const F=(0,h.Kh)({balance:null,fond:[],type:"outgoing"}),w=(0,h.Kh)({balance:null,fond:[],type:"outgoing",organization:null});async function D(){try{await C.GP.create(F),await getList(),isVisibleSidebar.value=!1}catch(e){console.log(e.response?.data)}}let S=0;async function T(){l.value=await C.du.list().then((e=>e?.data||[])),l.value=l.value.filter((l=>l.id==e.params.id))[0],S=+l.value.fond_balance}async function V(){k.value=await C.T2.list().then((e=>e?.data||[]))}async function K(){t.value=await C.GP.list().then((e=>e?.data||[]))}function W(){let e=b.value.map((e=>{let l={};return l.organization=e.id,l.balance=e.sum,l}));console.log({subdistributions:e,fond:l.value?.id}),C.zm.create({subdistributions:e,fond:l.value?.id}),M(d.id,d.fond?.id)}function X(){const e=(new Date).getTime(),t={unique_id:e,factory:i.value?.title?.uz,id:i.value?.id,fond:l.value?.title?.uz,sum:Number(c.value),percent:E.value||0};l.value.fond_balance=+l.value.fond_balance-Number(c.value),b.value.push(t),c.value=0,i.value=null}(0,a.wB)(i,(()=>{g.value=0}));const E=(0,a.EW)((()=>100*Number(c.value)/l.value.fond_balance)),I=(0,a.EW)((()=>{let e=100*l.value?.fond_balance/S;return e%1==0?e:e.toFixed(2)}));function R(e){null!=e&&(b.value=b.value.filter((l=>l.unique_id!=e.unique_id)),l.value.fond_balance=+l.value.fond_balance+e.sum)}(0,a.wB)(c,(()=>{b.value.map((e=>{e.percent=(100*Number(e.sum)/S)?.toFixed(2)}))})),(0,a.wB)(d,(e=>{M(e.id,e.fond?.id)}));const x=(0,h.KR)(0);async function z(){}async function M(e,l){v.value=!0,r.value=await C.fc.list({protocol:e,fond:l}).then((e=>e.data||[])).finally((()=>v.value=!1))}return{selectedProtocol:d,subDistLoading:v,insertedProfit:x,organizationPercent:E,fondPercent:I,tableData:b,formData:F,organizationList:n,fondData:l,contract_date:_,typeList:m,isVisibleTable:f,isOrganizationSelect:u,formDataDistr:w,subdistrib:s,distrAmount:c,balances:p,insertedBalances:g,totalBalance:y,selectedOrganizations:i,selectedFond:o,subdistriborg:k,protocolList:t,subDistList:r,distributeProfit:z,submitForm:D,fetchFondList:T,fetchOrganizationList:V,createDistribution:W,fetchProtocolList:K,addNewRow:X,removeData:R,getSubDistributions:M}}},D=t(6262);const S=(0,D.A)(w,[["render",g]]);var T=S},3192:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(641),n=t(33);const i={key:0,class:"mt-3"},o=["value"];function d(e,l,t,d,u,s){const r=(0,a.g2)("CTableHeaderCell"),c=(0,a.g2)("CTableRow"),b=(0,a.g2)("CTableHead"),k=(0,a.g2)("CTableDataCell"),f=(0,a.g2)("CIcon"),v=(0,a.g2)("CButton"),m=(0,a.g2)("CTableBody"),_=(0,a.g2)("CTable"),p=(0,a.g2)("CCardBody"),y=(0,a.g2)("CCard"),g=(0,a.g2)("CCol"),h=(0,a.g2)("CRow"),C=(0,a.g2)("CModalTitle"),F=(0,a.g2)("CModalHeader"),L=(0,a.g2)("CFormLabel"),w=(0,a.g2)("CFormInput"),D=(0,a.g2)("CFormTextarea"),S=(0,a.g2)("CInputGroup"),T=(0,a.g2)("CFormSelect"),V=(0,a.g2)("CModalFooter"),K=(0,a.g2)("CModal"),W=(0,a.gN)("c-tooltip");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fields,(e=>((0,a.uX)(),(0,a.CE)(a.FK,{key:e},[e.visible&&"created"!=e.key&&"start_date"!=e.key&&"end_date"!=e.key?((0,a.uX)(),(0,a.Wv)(r,{key:0},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)):(0,a.Q3)("",!0)],64)))),128)),(0,a.bF)(r,null,{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.eW)(" Harakat ")]))),_:1})])),_:1})])),_:1}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.listData,(e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.title.uz),1)])),_:2},1024),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.description.uz),1)])),_:2},1024),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.fond_balance),1)])),_:2},1024),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.status),1)])),_:2},1024),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{color:"info",size:"sm",class:"text-white",onClick:l=>d.viewDistribution(e)},{default:(0,a.k6)((()=>[(0,a.bF)(f,{icon:"cil-arrow-right",height:"18px"})])),_:2},1032,["onClick"])),[[W,{content:"Batafsil ko'rish",placement:"top"}]])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(K,{onClose:l[0]||(l[0]=()=>{d.isVisibleSidebar=!1}),keyboard:!1,visible:d.isVisibleSidebar},{default:(0,a.k6)((()=>[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,null,{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("Protokol yaratish")]))),_:1})])),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fields,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},["id"!=e.key&&"more"!=e.key&&"user"!=e.key&&"status"!=e.key&&"contract"!=e.key?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024),"fond"!=e.key&&"contract"!=e.key?((0,a.uX)(),(0,a.Wv)(S,{key:0},{default:(0,a.k6)((()=>[e.visible&&"description"!=e.key?((0,a.uX)(),(0,a.Wv)(w,{key:0,type:"number",placeholder:e.label,"aria-label":e.label,"aria-describedby":"basic-addon-"+e.key,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l,modelModifiers:{number:!0}},null,8,["placeholder","aria-label","aria-describedby","modelValue","onUpdate:modelValue"])):"description"!=e.key?((0,a.uX)(),(0,a.Wv)(w,{key:1,placeholder:e.label,"aria-label":e.label,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l},null,8,["placeholder","aria-label","modelValue","onUpdate:modelValue"])):((0,a.uX)(),(0,a.Wv)(D,{key:2,placeholder:"Enter Description",modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1024)):"fond"===e.key?((0,a.uX)(),(0,a.Wv)(T,{key:1,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l,onClick:d.fetchFondList},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fondList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.id,key:e.id},(0,n.v_)(e.title.uz),9,o)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])))),128)),(0,a.bF)(V,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"secondary"},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Yopish")]))),_:1}),(0,a.bF)(v,{color:"primary",onClick:d.submitForm},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("Saqlash")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible"])])}t(4114),t(4979);var u=t(953),s=t(5289),r=t(5673),c=t(5220),b=t(2994),k=(t(7321),{name:"DashboardPage",components:{CInputGroup:b.BG,CFormInput:b.OG,CFormLabel:b.A6,CFormSelect:b.MT,CFormTextarea:b.Im,CModal:b.zS,CSelect:b.CSelect,CMultiSelect:b.CMultiSelect},onMounted(){},setup(){const e=(0,c.rd)();let l=(0,u.KR)([]);const t=(0,u.KR)(!1),n=(0,u.KR)(null),i=(0,u.KR)([]),o=(0,r.G)("accessToken"),d=o.split(".")[1],b=JSON.parse(window.atob(d)),k=b.user_role,f=b.username,v=b?.user_id;async function m(){l.value=await s.du.list().then((e=>e?.data||[]))}(0,a.sV)((()=>{m()}));const _=(0,a.EW)((()=>s.du?.fields)),p=(0,u.Kh)({user:v,balance:null,fond:[],profit:null,percentage:null,description:null}),y=(0,u.KR)("");function g(e){y.value=e}async function h(){try{await s.GP.create(p),await m(),t.value=!1}catch(e){console.log(e.response?.data)}}async function C(){i.value=await s.du.list().then((e=>e?.data||[]))}function F(l){e.push({name:"Distribution",params:{id:l.id}})}return{listData:l,fields:_,isVisibleSidebar:t,modalProtocol:n,formData:p,submitForm:h,fondList:i,fetchFondList:C,selectedRowData:y,openModal:g,currentUser:f,viewDistribution:F,currentUserId:v,currentUserRole:k}}}),f=t(6262);const v=(0,f.A)(k,[["render",d]]);var m=v},5793:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(641),n=t(33);function i(e,l,t,i,o,d){const u=(0,a.g2)("CButton"),s=(0,a.g2)("CTableHeaderCell"),r=(0,a.g2)("CTableRow"),c=(0,a.g2)("CTableHead"),b=(0,a.g2)("CTableDataCell"),k=(0,a.g2)("CTableBody"),f=(0,a.g2)("CTable"),v=(0,a.g2)("CCardBody"),m=(0,a.g2)("CCard"),_=(0,a.g2)("CCol"),p=(0,a.g2)("CRow"),y=(0,a.g2)("CModalTitle"),g=(0,a.g2)("CModalHeader"),h=(0,a.g2)("CModalBody"),C=(0,a.g2)("CModalFooter"),F=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(_,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{component:"button",type:"button",color:"info",class:"mb-2 align-self-end text-white",onClick:l[0]||(l[0]=e=>i.isVisibleSidebar=!0)},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("Fond qo'shish")]))),_:1}),(0,a.bF)(f,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.fields,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.listData,(e=>((0,a.uX)(),(0,a.Wv)(r,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.title.uz),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.description.uz),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.old_balance),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.fond_balance),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.status),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.created),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.start_date),1)])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.end_date),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(r)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(F,{backdrop:!1,keyboard:!1,visible:i.isVisibleSidebar},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Modal title")]))),_:1})])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("Modal body text goes here.")]))),_:1}),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{color:"secondary",onClick:l[1]||(l[1]=e=>i.isVisibleSidebar=!1)},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("Close")]))),_:1}),(0,a.bF)(u,{color:"primary"},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("Save changes")]))),_:1})])),_:1})])),_:1},8,["visible"])])}var o=t(953),d=t(5289),u={name:"DashboardPage",components:{},setup(){let e=(0,o.KR)([]);const l=(0,o.KR)(!1);async function t(){e.value=await d.du.list().then((e=>e.data))}(0,a.sV)((()=>{t()}));const n=(0,a.EW)((()=>d.du?.fields));return console.log(e,d.du),{listData:e,fields:n,isVisibleSidebar:l}}},s=t(6262);const r=(0,s.A)(u,[["render",i]]);var c=r},2199:function(e,l,t){t.r(l),t.d(l,{default:function(){return g}});var a=t(641),n=t(33),i=t(3751);const o={class:"d-flex"},d={class:"d-flex flex-column gap-3"},u=["value"];function s(e,l,t,s,r,c){const b=(0,a.g2)("CButton"),k=(0,a.g2)("CTableHeaderCell"),f=(0,a.g2)("CTableRow"),v=(0,a.g2)("CTableHead"),m=(0,a.g2)("CTableDataCell"),_=(0,a.g2)("CIcon"),p=(0,a.g2)("CTableBody"),y=(0,a.g2)("CTable"),g=(0,a.g2)("CCardBody"),h=(0,a.g2)("CCard"),C=(0,a.g2)("CCol"),F=(0,a.g2)("CRow"),L=(0,a.g2)("CModalTitle"),w=(0,a.g2)("CModalHeader"),D=(0,a.g2)("CFormLabel"),S=(0,a.g2)("CFormSelect"),T=(0,a.g2)("CModalBody"),V=(0,a.g2)("CModalFooter"),K=(0,a.g2)("CModal"),W=(0,a.gN)("c-tooltip");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{component:"button",type:"button",color:"info",class:"mb-2 align-self-end text-white",onClick:l[0]||(l[0]=e=>s.isVisibleSidebar=!0)},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("shartnoma qo'shish")]))),_:1}),(0,a.bF)(y,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.fields,(e=>((0,a.uX)(),(0,a.CE)(a.FK,{key:e},[e.visible?((0,a.uX)(),(0,a.Wv)(k,{key:0},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)):(0,a.Q3)("",!0)],64)))),128)),(0,a.bF)(k,null,{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("Harakatlar")]))),_:1})])),_:1})])),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.listData,(e=>((0,a.uX)(),(0,a.Wv)(f,{key:e.id,onClick:l=>s.openModal(e)},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.organization?e.organization.uz:""),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.contract_date),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.balance),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.status),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.type),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.subdistribution),1)])),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(b,{disabled:"Completed"==e.status,size:"sm",class:"btn btn-success text-white",onClick:l=>s.verifyStatus(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(_,{icon:"cil-check",height:"18",alt:"true",style:{"margin-right":"5px"}})])),_:2},1032,["disabled","onClick"])),[[W,{content:"Tasdiqlash",placement:"top"}]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(b,{size:"sm",class:"btn btn-danger ms-1 text-white",onClick:l=>s.deleteItem(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(_,{icon:"cil-x-circle",height:"18"})])),_:2},1032,["onClick"])),[[W,{content:"O'chirish",placement:"top"}]])])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(K,{onClose:l[6]||(l[6]=()=>{s.isVisibleSidebar=!1}),keyboard:!1,visible:s.isVisibleSidebar},{default:(0,a.k6)((()=>[(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(L,null,{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("Shartnoma yaratish")]))),_:1})])),_:1}),(0,a.bF)(T,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.Lk)("div",null,[(0,a.bF)(D,null,{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Korxona")]))),_:1}),(0,a.bF)(S,{modelValue:s.formData.organization,"onUpdate:modelValue":l[1]||(l[1]=e=>s.formData.organization=e)},{default:(0,a.k6)((()=>[l[11]||(l[11]=(0,a.Lk)("option",{value:"",selected:"",disabled:""},"Tanlang",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.orgList,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.title?.uz),9,u)))),128))])),_:1},8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(D,null,{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("Sanasi")]))),_:1}),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"","onUpdate:modelValue":l[2]||(l[2]=e=>s.formData.contract_date=e),class:"form-control"},null,512),[[i.Jo,s.formData.contract_date]])]),(0,a.Lk)("div",null,[(0,a.bF)(D,null,{default:(0,a.k6)((()=>l[13]||(l[13]=[(0,a.eW)("Taqsimot")]))),_:1}),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"","onUpdate:modelValue":l[3]||(l[3]=e=>s.formData.subdistribution=e),class:"form-control",disabled:""},null,512),[[i.Jo,s.formData.subdistribution]])]),(0,a.Lk)("div",null,[(0,a.bF)(D,null,{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("Balance")]))),_:1}),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>s.formData.balance=e),class:"form-control",disabled:""},null,512),[[i.Jo,s.formData.balance]])])])])),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{color:"secondary",onClick:l[5]||(l[5]=e=>s.isVisibleSidebar=!1)},{default:(0,a.k6)((()=>l[15]||(l[15]=[(0,a.eW)("Yopish")]))),_:1}),(0,a.bF)(b,{color:"primary",onClick:s.submitForm},{default:(0,a.k6)((()=>l[16]||(l[16]=[(0,a.eW)("Saqlash")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible"])])}t(4979);var r=t(7682),c=t(953),b=t(5289),k=t(5673),f=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"],v=t(7321),m=t(2994),_={name:"DashboardPage",components:{CInputGroup:m.BG,CFormInput:m.OG,CFormLabel:m.A6,CFormSelect:m.MT,CFormTextarea:m.Im,CModal:m.zS,CSelect:m.CSelect,CMultiSelect:m.CMultiSelect,CButton:m.Q_,CTableRow:m.YI,cilTrash:f,CIcon:v.l},onMounted(){},setup(){let e=(0,c.KR)([]);const l=(0,c.KR)(!1),t=(0,c.KR)(null),n=(0,c.KR)([{name:"",id:null}]),i=(0,k.G)("accessToken"),o=i.split(".")[1],d=JSON.parse(window.atob(o)),u=d.user_role,s=d.username,f=d?.user_id,v=(0,c.KR)(""),m=(0,c.KR)([{name:"",id:4},{name:"withdraw",id:1},{name:"income",id:2},{name:"outgoing",id:3}]),_=(0,c.Kh)({organization:null,contract_date:null,balance:null,subdistribution:null});async function p(){e.value=await b.bB.list().then((e=>e?.data||[]))}(0,a.sV)((()=>{p(),F()}));const y=(0,a.EW)((()=>b.bB?.fields));(0,a.wB)((()=>_.organization),(e=>{console.log(e),_.subdistribution=n.value.find((l=>l.id==e))?.sub_distributions?.id||"-",_.balance=n.value.find((l=>l.id==e))?.sub_distributions?.balance??"-"}),{immediate:!0});const g=(0,c.KR)("");function h(e){g.value=e}async function C(){try{await b.bB.create(_),await p(),l.value=!1}catch(e){console.log(e.response?.data)}}async function F(){n.value=await b.T2.list().then((e=>e?.data||[]))}async function L(e){await r.A.put(`admin/contract/org-contract/update/${e}/`,{status:"Completed"}),p()}async function w(e){await r.A.delete(`admin/contract/org-contract/delete/${e}/`),p()}return{verifyStatus:L,deleteItem:w,listData:e,fields:y,isVisibleSidebar:l,modalProtocol:t,formData:_,submitForm:C,orgList:n,fetchOrgList:F,selectedRowData:g,openModal:h,currentUser:s,currentUserId:f,currentUserRole:u,selectedDate:v,typeList:m}}},p=t(6262);const y=(0,p.A)(_,[["render",s]]);var g=y},8760:function(e,l,t){t.r(l),t.d(l,{default:function(){return C}});var a=t(641),n=t(33);const i={style:{"font-weight":"700"}},o={class:"col-5"},d={style:{"font-weight":"500"}},u={style:{"font-weight":"500"}},s={class:"col-7",style:{"padding-left":"20px"}},r={style:{"font-weight":"500"}},c={style:{"font-weight":"500"}},b={style:{"font-weight":"500"}},k={style:{"font-weight":"500"}},f={style:{"font-weight":"500"}};function v(e,l,t,v,m,_){const p=(0,a.g2)("CTableHeaderCell"),y=(0,a.g2)("CTableRow"),g=(0,a.g2)("CTableHead"),h=(0,a.g2)("CTableDataCell"),C=(0,a.g2)("CTableBody"),F=(0,a.g2)("CTable"),L=(0,a.g2)("CCardBody"),w=(0,a.g2)("CCard"),D=(0,a.g2)("CCol"),S=(0,a.g2)("CRow");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("h2",null,"Protokol #"+(0,n.v_)(t.id),1),(0,a.Lk)("h4",null,"Fond #"+(0,n.v_)(v.listData.fond),1),(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bF)(D,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(w,{class:"mb-4",style:{width:"50%"}},{default:(0,a.k6)((()=>[(0,a.bF)(L,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(p),(0,a.bF)(p,null,{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.eW)(" Yanvar ")]))),_:1})])),_:1})])),_:1}),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.Lk)("div",null,"Foyda: ",-1)]))),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(v.listData.profit),1)])),_:1})])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.Lk)("div",null,"Dividend solig'i: ",-1)]))),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(v.listData.percentage),1)])),_:1})])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.Lk)("div",{style:{"font-weight":"700"}},"Sof foyda: ",-1)]))),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,(0,n.v_)(v.listData.profit-v.listData.percentage),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(w,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{class:"d-flex flex-row justify-content-between"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[l[6]||(l[6]=(0,a.Lk)("p",null,"Sana: ",-1)),(0,a.bF)(F,{align:"middle",class:"mb-0 border protocol-table",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.fields.filter((e=>"inn"==e.key||"id"==e.key||"percentage"==e.key||"contract_total_balance"==e.key)),(e=>((0,a.uX)(),(0,a.Wv)(p,{key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.listData.investor,(e=>((0,a.uX)(),(0,a.Wv)(y,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.inn),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.contract_total_balance),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.percentage),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.Lk)("div",null,null,-1)]))),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.Lk)("div",{style:{"font-weight":"500"}},"Jami",-1)]))),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,(0,n.v_)(v.sumOfTotalBalance),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",u,(0,n.v_)(v.sumOfTotalPercent),1)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a.Lk)("div",s,[l[8]||(l[8]=(0,a.Lk)("p",null,"Sana: ",-1)),(0,a.bF)(F,{align:"middle",class:"mb-0 border protocol-table",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.fields.filter((e=>"initial_balance"==e.key||"withdraw"==e.key||"client_balance"==e.key||"old_percentage"==e.key||"dividend"==e.key||"investment"==e.key)),(e=>((0,a.uX)(),(0,a.Wv)(p,{key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.listData.investor,(e=>((0,a.uX)(),(0,a.Wv)(y,{key:e.id},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.initial_balance),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.withdraw),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.client_balance),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.old_percentage),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.dividend),1)])),_:2},1024),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.investment),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,(0,n.v_)(v.sum_initial_balance),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",c,(0,n.v_)(v.sum_withdraw),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",b,(0,n.v_)(v.sum_client_balance),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",k,(0,n.v_)(v.sum_old_percentage),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,(0,n.v_)(v.sum_dividend),1)])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.Lk)("div",{style:{"font-weight":"500"}},(0,n.v_)(0),-1)]))),_:1})])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})])}var m=t(953),_=(t(7682),t(5289)),p=(t(6501),t(2994)),y={name:"DashboardPage",props:["id"],components:{CInputGroup:p.BG,CFormInput:p.OG,CFormLabel:p.A6,CFormSelect:p.MT,CFormTextarea:p.Im,CModal:p.zS,CSelect:p.CSelect,CMultiSelect:p.CMultiSelect,CTableRow:p.YI},setup(e){const l=(0,m.KR)({}),t=(0,m.KR)(0),n=(0,m.KR)(0),i=(0,m.KR)(0),o=(0,m.KR)(0),d=(0,m.KR)(0),u=(0,m.KR)(0),s=(0,m.KR)(0);async function r(){await _.Zc.list({id:e?.id}).then((e=>{l.value=e.data,t.value=e.data?.investor?.reduce(((e,l)=>e+(l.contract_total_balance>0?l.contract_total_balance:0)),0),n.value=e.data?.investor?.reduce(((e,l)=>e+(l.percentage>0?l.percentage:0)),0),i.value=e.data?.investor?.reduce(((e,l)=>e+(l.initial_balance>0?l.initial_balance:0)),0),o.value=e.data?.investor?.reduce(((e,l)=>e+(l.withdraw>0?l.withdraw:0)),0),d.value=e.data?.investor?.reduce(((e,l)=>e+(l.client_balance>0?l.client_balance:0)),0),u.value=e.data?.investor?.reduce(((e,l)=>e+(l.old_percentage>0?l.old_percentage:0)),0),s.value=e.data?.investor?.reduce(((e,l)=>e+(l.dividend>0?l.dividend:0)),0)}))}(0,a.sV)((()=>{r()}));const c=(0,a.EW)((()=>_.Zc?.fields));return{listData:l,fields:c,sumOfTotalBalance:t,sumOfTotalPercent:n,sum_initial_balance:i,sum_withdraw:o,sum_client_balance:d,sum_old_percentage:u,sum_dividend:s}}},g=t(6262);const h=(0,g.A)(y,[["render",v]]);var C=h},3953:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(641),n=t(33);const i={key:0,class:"mt-3"},o=["value"];function d(e,l,t,d,u,s){const r=(0,a.g2)("CButton"),c=(0,a.g2)("CTableHeaderCell"),b=(0,a.g2)("CTableRow"),k=(0,a.g2)("CTableHead"),f=(0,a.g2)("CTableDataCell"),v=(0,a.g2)("CIcon"),m=(0,a.g2)("CTableBody"),_=(0,a.g2)("CTable"),p=(0,a.g2)("CCardBody"),y=(0,a.g2)("CCard"),g=(0,a.g2)("CCol"),h=(0,a.g2)("CRow"),C=(0,a.g2)("CModalTitle"),F=(0,a.g2)("CModalHeader"),L=(0,a.g2)("CFormLabel"),w=(0,a.g2)("CFormInput"),D=(0,a.g2)("CFormTextarea"),S=(0,a.g2)("CInputGroup"),T=(0,a.g2)("CFormSelect"),V=(0,a.g2)("CModalFooter"),K=(0,a.g2)("CModal"),W=(0,a.gN)("c-tooltip");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,{md:12},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"d-flex flex-column"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{component:"button",type:"button",color:"info",class:"mb-2 align-self-end text-white",onClick:l[0]||(l[0]=e=>d.isVisibleSidebar=!0)},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("Protokol qo'shish")]))),_:1}),(0,a.bF)(_,{align:"middle",class:"mb-0 border",hover:"",responsive:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{color:"light"},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fields,(e=>((0,a.uX)(),(0,a.CE)(a.FK,{key:e},[e.visible?((0,a.uX)(),(0,a.Wv)(c,{key:0},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)):(0,a.Q3)("",!0)],64)))),128))])),_:1})])),_:1}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.listData,(e=>((0,a.uX)(),(0,a.Wv)(b,{key:e.id,onClick:l=>d.openModal(e)},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.id),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.user.get_full_name),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.fond.title.uz),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.balance),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.status),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.profit),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.percentage),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.description),1)])),_:2},1024),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(r,{color:"info",size:"sm",class:"text-white",onClick:l=>d.viewDistribution(e)},{default:(0,a.k6)((()=>[(0,a.bF)(v,{icon:"cil-arrow-right",height:"18px"})])),_:2},1032,["onClick"])),[[W,{content:"Batafsil ko'rish",placement:"top"}]])])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(K,{onClose:l[1]||(l[1]=()=>{d.isVisibleSidebar=!1}),keyboard:!1,visible:d.isVisibleSidebar},{default:(0,a.k6)((()=>[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,null,{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Protokol yaratish")]))),_:1})])),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fields,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},["id"!=e.key&&"more"!=e.key&&"user"!=e.key&&"status"!=e.key&&"contract"!=e.key?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024),"fond"!=e.key&&"contract"!=e.key?((0,a.uX)(),(0,a.Wv)(S,{key:0},{default:(0,a.k6)((()=>[e.visible&&"description"!=e.key?((0,a.uX)(),(0,a.Wv)(w,{key:0,type:"number",placeholder:e.label,"aria-label":e.label,"aria-describedby":"basic-addon-"+e.key,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l,modelModifiers:{number:!0}},null,8,["placeholder","aria-label","aria-describedby","modelValue","onUpdate:modelValue"])):"description"!=e.key?((0,a.uX)(),(0,a.Wv)(w,{key:1,placeholder:e.label,"aria-label":e.label,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l},null,8,["placeholder","aria-label","modelValue","onUpdate:modelValue"])):((0,a.uX)(),(0,a.Wv)(D,{key:2,placeholder:"Enter Description",modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1024)):"fond"===e.key?((0,a.uX)(),(0,a.Wv)(T,{key:1,modelValue:d.formData[e.key],"onUpdate:modelValue":l=>d.formData[e.key]=l},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.fondList,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.id,key:e.id},(0,n.v_)(e.title.uz),9,o)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])))),128)),(0,a.bF)(V,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"secondary"},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("Yopish")]))),_:1}),(0,a.bF)(r,{color:"primary",onClick:d.submitForm},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("Saqlash")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible"])])}t(4114),t(4979);var u=t(953),s=t(5220),r=t(5289),c=t(5673),b=t(2994),k={name:"DashboardPage",components:{CInputGroup:b.BG,CFormInput:b.OG,CFormLabel:b.A6,CFormSelect:b.MT,CFormTextarea:b.Im,CModal:b.zS,CSelect:b.CSelect,CMultiSelect:b.CMultiSelect},onMounted(){},setup(){const e=(0,s.rd)();let l=(0,u.KR)([]);const t=(0,u.KR)(!1),n=(0,u.KR)(null),i=(0,u.KR)([]),o=(0,c.G)("accessToken"),d=o.split(".")[1],b=JSON.parse(window.atob(d)),k=b.user_role,f=b.username,v=b?.user_id;async function m(){l.value=await r.GP.list().then((e=>e?.data||[]))}(0,a.sV)((()=>{m(),C()}));const _=(0,a.EW)((()=>r.GP?.fields)),p=(0,u.Kh)({user:v,balance:null,fond:[],profit:null,percentage:null,description:null}),y=(0,u.KR)("");function g(e){y.value=e}async function h(){try{await r.GP.create(p),await m(),t.value=!1}catch(e){console.log(e.response?.data)}}async function C(){i.value=await r.du.list().then((e=>e?.data||[]))}function F(l){e.push({name:"ProtocolInfo",params:{id:l.id}})}return{listData:l,fields:_,isVisibleSidebar:t,modalProtocol:n,formData:p,submitForm:h,fondList:i,fetchFondList:C,selectedRowData:y,viewDistribution:F,openModal:g,currentUser:f,currentUserId:v,currentUserRole:k}}},f=t(6262);const v=(0,f.A)(k,[["render",d]]);var m=v},2106:function(e,l,t){var a=t(283),n=t(4913);e.exports=function(e,l,t){return t.get&&a(t.get,l,{getter:!0}),t.set&&a(t.set,l,{setter:!0}),n.f(e,l,t)}},7979:function(e,l,t){var a=t(8551);e.exports=function(){var e=a(this),l="";return e.hasIndices&&(l+="d"),e.global&&(l+="g"),e.ignoreCase&&(l+="i"),e.multiline&&(l+="m"),e.dotAll&&(l+="s"),e.unicode&&(l+="u"),e.unicodeSets&&(l+="v"),e.sticky&&(l+="y"),l}},9479:function(e,l,t){var a=t(4576),n=t(3724),i=t(2106),o=t(7979),d=t(9039),u=a.RegExp,s=u.prototype,r=n&&d((function(){var e=!0;try{u(".","d")}catch(r){e=!1}var l={},t="",a=e?"dgimsy":"gimsy",n=function(e,a){Object.defineProperty(l,e,{get:function(){return t+=a,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(i.hasIndices="d"),i)n(o,i[o]);var d=Object.getOwnPropertyDescriptor(s,"flags").get.call(l);return d!==a||t!==a}));r&&i(s,"flags",{configurable:!0,get:o})}}]);
//# sourceMappingURL=dashboard.28592c32.js.map